<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Doce Sabor Caseiro</title>
  <style>
    * { box-sizing: border-box; font-family: 'Segoe UI', sans-serif; margin: 0; padding: 0; }
    body { background: #fff0f5; color: #333; }
    .splash {
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      height: 100vh; background: #f28ab2; color: white; text-align: center;
    }
    .splash h1 { font-size: 3rem; margin-bottom: 20px; }
    .splash button {
      background: white; color: #f28ab2; font-size: 1.2rem;
      border: none; padding: 12px 24px; border-radius: 8px;
      cursor: pointer; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    .container { display: none; padding: 20px; }
    nav {
      display: flex; justify-content: space-around;
      background: #f28ab2; padding: 12px 0; position: sticky; top: 0;
      z-index: 10;
    }
    nav button {
      background: none; border: none; color: white; font-size: 1rem;
      font-weight: bold; cursor: pointer; transition: transform 0.2s;
    }
    nav button:hover { transform: scale(1.05); }

    section {
      display: none; background: white; padding: 20px;
      margin-top: 20px; border-radius: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    section.active { display: block; }

    h2 {
      color: #f28ab2; margin-bottom: 16px;
      border-bottom: 2px solid #f28ab2; padding-bottom: 4px;
    }

    input, select {
      width: 100%; padding: 10px; margin-bottom: 12px;
      border: 1px solid #ccc; border-radius: 8px;
    }

    button.save {
      background: #f28ab2; color: white; padding: 10px 20px;
      border: none; border-radius: 8px; cursor: pointer;
      font-weight: bold;
    }

    ul { margin-top: 10px; list-style: none; padding: 0; }
    ul li {
      background: #ffe6ec; margin-bottom: 8px; padding: 10px;
      border-radius: 6px; box-shadow: 0 1px 4px rgba(0,0,0,0.05);
      display: flex; justify-content: space-between; align-items: center;
    }

    .acoes button {
      margin-left: 5px; padding: 4px 8px; font-size: 0.8rem;
      border: none; border-radius: 4px; cursor: pointer;
    }
    .editar { background: #ffc107; color: #fff; }
    .excluir { background: #dc3545; color: #fff; }

    .financeiro p {
      font-size: 1.1rem; margin: 10px 0;
    }
    .financeiro span {
      font-weight: bold;
      color: #444;
    }
  </style>
</head>
<body>

<div class="splash" id="splash">
  <h1>Doce Sabor Caseiro</h1>
  <button onclick="entrar()">Entrar</button>
</div>

<div class="container" id="app">
  <nav>
    <button onclick="mostrar('clientes')">üìã Clientes</button>
    <button onclick="mostrar('pedidos')">üßÅ Pedidos</button>
    <button onclick="mostrar('despesas')">üí∏ Despesas</button>
    <button onclick="mostrar('estoque')">üì¶ Estoque</button>
    <button onclick="mostrar('financeiro')">üìä Financeiro</button>
  </nav>

  <section id="clientes" class="active">
    <h2>Cadastro de Cliente</h2>
    <input id="clienteNome" placeholder="Nome do cliente">
    <input id="clienteTelefone" placeholder="Telefone">
    <input id="clienteEndereco" placeholder="Endere√ßo">
    <button class="save" onclick="salvarCliente()">Salvar</button>
    <input id="buscaCliente" placeholder="Buscar cliente" oninput="buscarCliente()">
    <ul id="listaClientes"></ul>
  </section>

  <section id="pedidos">
    <h2>Pedidos</h2>
    <input id="pedidoCliente" placeholder="Nome do cliente">
    <input id="tipoProduto" placeholder="Tipo de produto">
    <input id="valorPedido" type="number" placeholder="Valor (R$)">
    <select id="formaEntrega">
      <option value="Entregar">Entregar</option>
      <option value="Retirar">Retirar</option>
    </select>
    <button class="save" onclick="salvarPedido()">Salvar Pedido</button>
    <input id="buscaPedido" placeholder="Buscar pedido" oninput="buscarPedido()">
    <ul id="listaPedidos"></ul>
  </section>

  <section id="despesas">
    <h2>Despesas</h2>
    <select id="tipoDespesa">
      <option value="Mercadorias">Mercadorias</option>
      <option value="Loja">Loja</option>
      <option value="Pessoais">Pessoais</option>
      <option value="Outros">Outros</option>
    </select>
    <input id="descricaoDespesa" placeholder="Descri√ß√£o da despesa">
    <input id="valorDespesa" type="number" placeholder="Valor (R$)">
    <input id="dataDespesa" type="date">
    <button class="save" onclick="salvarDespesa()">Salvar Despesa</button>
    <input id="buscaDespesa" placeholder="Buscar despesa" oninput="buscarDespesa()">
    <ul id="listaDespesas"></ul>
  </section>

  <section id="estoque">
    <h2>Estoque</h2>
    <input id="produtoNome" placeholder="Nome do Produto">
    <input id="produtoQtd" type="number" placeholder="Quantidade">
    <button class="save" onclick="salvarProduto()">Salvar Produto</button>
    <input id="buscaProduto" placeholder="Buscar produto" oninput="buscarProduto()">
    <ul id="listaEstoque"></ul>
  </section>

  <section id="financeiro" class="financeiro">
    <h2>Financeiro</h2>
    <p><strong>Ganhos:</strong> R$ <span id="ganhos">0.00</span></p>
    <p><strong>Gastos:</strong> R$ <span id="gastos">0.00</span></p>
    <p><strong>Lucros:</strong> R$ <span id="lucros">0.00</span></p>
    <p><em>Relat√≥rios di√°rio, mensal e anual em breve!</em></p>
  </section>
</div>

<script>
let clienteEditando = null;
let pedidoEditando = null;
let despesaEditando = null;
let produtoEditando = null;

function entrar() {
  document.getElementById('splash').style.display = 'none';
  document.getElementById('app').style.display = 'block';
  atualizarTudo();
}

function mostrar(secao) {
  document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
  document.getElementById(secao).classList.add('active');
}

// CLIENTES
function salvarCliente() {
  const nome = clienteNome.value.trim();
  const telefone = clienteTelefone.value.trim();
  const endereco = clienteEndereco.value.trim();
  if (!nome || !telefone || !endereco) return alert('Preencha todos os campos');
  let clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
  if (clienteEditando !== null) {
    clientes[clienteEditando] = { nome, telefone, endereco };
    clienteEditando = null;
  } else {
    clientes.push({ nome, telefone, endereco });
  }
  localStorage.setItem('clientes', JSON.stringify(clientes));
  clienteNome.value = clienteTelefone.value = clienteEndereco.value = '';
  buscarCliente();
}

function buscarCliente() {
  const termo = buscaCliente.value.toLowerCase();
  const lista = document.getElementById('listaClientes');
  lista.innerHTML = '';
  const clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
  clientes.forEach((c, i) => {
    if (!c.nome.toLowerCase().includes(termo)) return;
    const li = document.createElement('li');
    li.innerHTML = `${c.nome} - ${c.telefone} (${c.endereco})
      <div class="acoes">
        <button class="editar" onclick="editarCliente(${i})">Editar</button>
        <button class="excluir" onclick="excluirCliente(${i})">Excluir</button>
      </div>`;
    lista.appendChild(li);
  });
}

function editarCliente(i) {
  const clientes = JSON.parse(localStorage.getItem('clientes'));
  const c = clientes[i];
  clienteNome.value = c.nome;
  clienteTelefone.value = c.telefone;
  clienteEndereco.value = c.endereco;
  clienteEditando = i;
}

function excluirCliente(i) {
  if (!confirm('Excluir este cliente?')) return;
  let clientes = JSON.parse(localStorage.getItem('clientes') || '[]');
  clientes.splice(i, 1);
  localStorage.setItem('clientes', JSON.stringify(clientes));
  buscarCliente();
}

// PEDIDOS
function salvarPedido() {
  const nome = pedidoCliente.value.trim();
  const produto = tipoProduto.value.trim();
  const valor = parseFloat(valorPedido.value);
  const entrega = formaEntrega.value;
  if (!nome || !produto || isNaN(valor)) return alert('Preencha todos os campos');
  let pedidos = JSON.parse(localStorage.getItem('pedidos') || '[]');
  if (pedidoEditando !== null) {
    pedidos[pedidoEditando] = { nome, produto, valor, entrega };
    pedidoEditando = null;
  } else {
    pedidos.push({ nome, produto, valor, entrega });
  }
  localStorage.setItem('pedidos', JSON.stringify(pedidos));
  pedidoCliente.value = tipoProduto.value = valorPedido.value = '';
  buscarPedido(); atualizarFinanceiro();
}

function buscarPedido() {
  const termo = buscaPedido.value.toLowerCase();
  const lista = document.getElementById('listaPedidos');
  lista.innerHTML = '';
  const pedidos = JSON.parse(localStorage.getItem('pedidos') || '[]');
  pedidos.forEach((p, i) => {
    if (!p.nome.toLowerCase().includes(termo)) return;
    const li = document.createElement('li');
    li.innerHTML = `${p.nome} - ${p.produto} - R$${p.valor.toFixed(2)} (${p.entrega})
      <div class="acoes">
        <button class="editar" onclick="editarPedido(${i})">Editar</button>
        <button class="excluir" onclick="excluirPedido(${i})">Excluir</button>
      </div>`;
    lista.appendChild(li);
  });
}

function editarPedido(i) {
  const pedidos = JSON.parse(localStorage.getItem('pedidos'));
  const p = pedidos[i];
  pedidoCliente.value = p.nome;
  tipoProduto.value = p.produto;
  valorPedido.value = p.valor;
  formaEntrega.value = p.entrega;
  pedidoEditando = i;
}

function excluirPedido(i) {
  if (!confirm('Excluir este pedido?')) return;
  let pedidos = JSON.parse(localStorage.getItem('pedidos') || '[]');
  pedidos.splice(i, 1);
  localStorage.setItem('pedidos', JSON.stringify(pedidos));
  buscarPedido(); atualizarFinanceiro();
}

// DESPESAS
function salvarDespesa() {
  const tipo = tipoDespesa.value;
  const descricao = descricaoDespesa.value.trim();
  const valor = parseFloat(valorDespesa.value);
  const data = dataDespesa.value;
  if (!tipo || !descricao || isNaN(valor) || !data) return alert('Preencha todos os campos');
  let despesas = JSON.parse(localStorage.getItem('despesas') || '[]');
  if (despesaEditando !== null) {
    despesas[despesaEditando] = { tipo, descricao, valor, data };
    despesaEditando = null;
  } else {
    despesas.push({ tipo, descricao, valor, data });
  }
  localStorage.setItem('despesas', JSON.stringify(despesas));
  descricaoDespesa.value = valorDespesa.value = dataDespesa.value = '';
  buscarDespesa(); atualizarFinanceiro();
}

function buscarDespesa() {
  const termo = buscaDespesa.value.toLowerCase();
  const lista = document.getElementById('listaDespesas');
  lista.innerHTML = '';
  const despesas = JSON.parse(localStorage.getItem('despesas') || '[]');
  despesas.forEach((d, i) => {
    if (!d.descricao.toLowerCase().includes(termo)) return;
    const li = document.createElement('li');
    li.innerHTML = `${d.data} - ${d.tipo} - ${d.descricao} - R$${d.valor.toFixed(2)}
      <div class="acoes">
        <button class="editar" onclick="editarDespesa(${i})">Editar</button>
        <button class="excluir" onclick="excluirDespesa(${i})">Excluir</button>
      </div>`;
    lista.appendChild(li);
  });
}

function editarDespesa(i) {
  const d = JSON.parse(localStorage.getItem('despesas'))[i];
  tipoDespesa.value = d.tipo;
  descricaoDespesa.value = d.descricao;
  valorDespesa.value = d.valor;
  dataDespesa.value = d.data;
  despesaEditando = i;
}

function excluirDespesa(i) {
  if (!confirm("Excluir esta despesa?")) return;
  let despesas = JSON.parse(localStorage.getItem('despesas') || '[]');
  despesas.splice(i, 1);
  localStorage.setItem('despesas', JSON.stringify(despesas));
  buscarDespesa(); atualizarFinanceiro();
}

// ESTOQUE
function salvarProduto() {
  const nome = produtoNome.value.trim();
  const qtd = parseInt(produtoQtd.value);
  if (!nome || isNaN(qtd)) return alert('Preencha todos os campos');
  let estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
  if (produtoEditando !== null) {
    estoque[produtoEditando] = { nome, qtd };
    produtoEditando = null;
  } else {
    estoque.push({ nome, qtd });
  }
  localStorage.setItem('estoque', JSON.stringify(estoque));
  produtoNome.value = produtoQtd.value = '';
  buscarProduto();
}

function buscarProduto() {
  const termo = buscaProduto.value.toLowerCase();
  const lista = document.getElementById('listaEstoque');
  lista.innerHTML = '';
  const estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
  estoque.forEach((e, i) => {
    if (!e.nome.toLowerCase().includes(termo)) return;
    const li = document.createElement('li');
    li.innerHTML = `${e.nome} - ${e.qtd} unidade(s) ${e.qtd === 0 ? ' (Em falta)' : ''}
      <div class="acoes">
        <button class="editar" onclick="editarProduto(${i})">Editar</button>
        <button class="excluir" onclick="excluirProduto(${i})">Excluir</button>
      </div>`;
    lista.appendChild(li);
  });
}

function editarProduto(i) {
  const estoque = JSON.parse(localStorage.getItem('estoque'));
  const p = estoque[i];
  produtoNome.value = p.nome;
  produtoQtd.value = p.qtd;
  produtoEditando = i;
}

function excluirProduto(i) {
  if (!confirm("Excluir este produto?")) return;
  let estoque = JSON.parse(localStorage.getItem('estoque') || '[]');
  estoque.splice(i, 1);
  localStorage.setItem('estoque', JSON.stringify(estoque));
  buscarProduto();
}

// FINANCEIRO
function atualizarFinanceiro() {
  const pedidos = JSON.parse(localStorage.getItem('pedidos') || '[]');
  const despesas = JSON.parse(localStorage.getItem('despesas') || '[]');
  const ganhos = pedidos.reduce((soma, p) => soma + p.valor, 0);
  const gastos = despesas.reduce((soma, d) => soma + d.valor, 0);
  const lucros = ganhos - gastos;
  document.getElementById('ganhos').textContent = ganhos.toFixed(2);
  document.getElementById('gastos').textContent = gastos.toFixed(2);
  document.getElementById('lucros').textContent = lucros.toFixed(2);
}

function atualizarTudo() {
  buscarCliente();
  buscarPedido();
  buscarDespesa();
  buscarProduto();
  atualizarFinanceiro();
}
</script>

</body>
</html>